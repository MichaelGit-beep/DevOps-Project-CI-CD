---
- name: add users
  hosts: node00
  vars:
    admin_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          31626235653361366561306534616631363735393530646234353261643139383161656330666132
          3334306330333639653039386561353961376461366164300a663230346332316339356535636366
          33653934366437306364346234343430333863383565386234393363643934306262653363393631
          3737303663636436620a386563366339323638663163363862633763396537613930643034386563
          6434
    dev_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30363962393630336230376233346262353566366539373564306331346331663165353938653438
          6437326139393238393638323732363430313335643663350a306666326364313666323664393561
          32376533316432633362306164646364626334353633343363393562636430376166353563383430
          3432643663346633380a353939323130636530313932343566613066386661623934343665303730
          6638
  tasks:
  - include_vars: file=data/users.yml
  - user:
      name: "{{ item }}"
      password: "{{ admin_pass | string | password_hash('sha512') }}"
      groups: wheel
    loop: "{{ admins | list }}"
  - user:
      name: "{{ item }}"
      password: "{{ dev_pass | string | password_hash('sha512') }}"
      home: /var/www
    loop: "{{ developers | list }}"